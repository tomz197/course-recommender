import{r as e,j as s,S as t,c as a,a5 as r,L as i,a6 as o,a7 as l,a8 as n,a9 as c,aa as d,B as u,ab as m,ac as x,ad as h,ae as p,af as y}from"./recommendations-BY9tuwrt.js";import{d as f,I as j}from"./visualization-DK40jit8.js";import{u as v}from"./index-BKqsbYES.js";import"./plotly-vendor-Co-r0fb2.js";function g({onSelectCourse:i,placeholder:o="Search courses...",excludeCourses:l=[],inputStyle:n}){const[c,d]=e.useState(!1),[u,m]=e.useState(""),x=e.useRef(null),h=e.useRef(null),{data:p=[],isLoading:y}=f(u,100),v=e.useMemo((()=>p.length?p.filter((e=>!l.some((s=>s.CODE===e.CODE)))):[]),[p,l]);e.useEffect((()=>{const e=e=>{x.current&&h.current&&!x.current.contains(e.target)&&!h.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const g=e=>{i(e),m(""),d(!1)};return s.jsxs("div",{className:"relative w-full",children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative",children:[s.jsx(t,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(j,{ref:x,type:"text",value:u,onChange:e=>{const s=e.target.value;m(s),s.length>0?d(!0):d(!1)},onKeyDown:e=>{"Enter"===e.key&&c&&v.length>0&&!y&&(e.preventDefault(),g(v[0]))},onFocus:()=>u.length>0&&d(!0),placeholder:o,className:a(n,"pl-10 h-12 text-lg shadow-lg border-2")})]})}),c&&s.jsx("div",{ref:h,className:"absolute z-10 mt-1 w-full rounded-md border border-input bg-background shadow-md",children:y?s.jsxs("div",{className:"flex items-center justify-center p-4",children:[s.jsx(r,{className:"h-4 w-4 animate-spin text-muted-foreground"}),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching courses..."})]}):v.length>0?s.jsxs("ul",{className:"max-h-60 overflow-auto py-1",children:[v.map((e=>s.jsxs("li",{onClick:()=>g(e),className:a("px-3 py-2 text-sm cursor-pointer hover:bg-accent hover:text-accent-foreground","transition-colors duration-150"),children:[s.jsxs("div",{className:"font-medium",children:[e.CODE," - ",e.FACULTY]}),e.NAME&&s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:e.NAME})]},e.CODE))),100===v.length?s.jsxs("li",{className:"px-3 py-2 text-sm text-center text-muted-foreground",children:["Showing first ",100," results. Try a more specific search term."]}):null]}):u.length>0?s.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No courses found. Try a different search term."}):null})]})}function N(){return s.jsx(e.Suspense,{fallback:s.jsx(i,{}),children:s.jsx(b,{})})}function b(){const t=function(s){const[t,a]=e.useState(!1);return e.useEffect((()=>{const e=window.matchMedia(s);a(e.matches);const t=e=>a(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}),[s]),t}("(max-width: 768px)");return s.jsx("main",{className:"min-h-screen",children:t?s.jsx(k,{}):s.jsx(C,{})})}function k(){const e=v(),{likedCourses:t,dislikedCourses:a,addLikedCourse:r,addDislikedCourse:i,removeLikedCourse:m,removeDislikedCourse:x}=o();return s.jsxs("div",{className:"container mx-auto px-4 py-4 pb-24 flex flex-col gap-4",children:[s.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center text-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-3",children:"MUNI Course Recommendation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select courses you like and dislike to get personalized recommendations"})]}),s.jsxs("div",{className:"flex flex-col gap-8",children:[s.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-green-500"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Liked Courses"})]}),s.jsx(c,{courses:Array.from(t.values()),onRemove:m,emptyMessage:"No liked courses",title:"Liked courses"}),s.jsx(g,{onSelectCourse:r,placeholder:"Search courses...",inputStyle:"shadow-green-500/10 border-green-500/20",excludeCourses:[...t.values(),...a.values()]})]})}),s.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-5 h-5 text-destructive"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Disliked Courses"})]}),s.jsx(c,{courses:Array.from(a.values()),onRemove:x,emptyMessage:"No disliked courses",title:"Disliked courses"}),s.jsx(g,{onSelectCourse:i,placeholder:"Search courses...",inputStyle:"shadow-destructive/10 border-destructive/20",excludeCourses:[...t.values(),...a.values()]})]})})]}),s.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t",children:[s.jsx(u,{size:"lg",onClick:()=>{e("/recommendations")},disabled:0===t.size,className:"w-full group relative overflow-hidden py-4 text-lg font-semibold transition-all hover:scale-105 hover:cursor-pointer",children:"Get Recommendations"}),0===t.size&&s.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-muted-foreground text-center mt-2",children:"Select at least one course you like"})]})]})}function C(){const e=v(),{likedCourses:t,dislikedCourses:a,addLikedCourse:r,addDislikedCourse:i,removeLikedCourse:f,removeDislikedCourse:j}=o();return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"container mx-auto px-1 sm:px-4 py-4 sm:p-8 md:py-12",children:[s.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center text-center mb-12",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:"MUNI Course Recommendation"}),s.jsx("p",{className:"text-base sm:text-lg text-muted-foreground max-w-2xl leading-relaxed",children:"Help us understand your preferences by selecting courses you like and dislike, and we'll recommend courses tailored to your interests."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[s.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:s.jsxs(m,{className:"h-full border-2 border-green-500/10 hover:border-green-500/20 transition-colors duration-200",children:[s.jsxs(x,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-green-500"}),s.jsx(h,{children:"Courses You Like"})]}),s.jsx(p,{className:"text-base",children:"Select courses that interest you or that you've enjoyed in the past"})]}),s.jsxs(y,{className:"space-y-4 flex flex-col justify-between flex-1",children:[s.jsx(c,{courses:Array.from(t.values()),onRemove:f,emptyMessage:"No liked courses selected yet",title:"Liked courses"}),s.jsx(g,{onSelectCourse:r,placeholder:"Search by course name, code, or faculty...",excludeCourses:[...t.values(),...a.values()]})]})]})}),s.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:s.jsxs(m,{className:"h-full border-2 border-destructive/10 hover:border-destructive/20 transition-colors duration-200",children:[s.jsxs(x,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-5 h-5 text-destructive"}),s.jsx(h,{children:"Courses You Dislike"})]}),s.jsx(p,{className:"text-base",children:"Select courses that don't interest you or that you didn't enjoy"})]}),s.jsxs(y,{className:"space-y-4 flex flex-col justify-between flex-1",children:[s.jsx(c,{courses:Array.from(a.values()),onRemove:j,emptyMessage:"No disliked courses selected yet",title:"Disliked courses"}),s.jsx(g,{onSelectCourse:i,placeholder:"Search by course name, code, or faculty...",excludeCourses:[...t.values(),...a.values()]})]})]})})]}),s.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"flex flex-col justify-center sm:items-center",children:[s.jsx(u,{size:"lg",onClick:()=>{e("/recommendations")},disabled:0===t.size,className:"group relative overflow-hidden px-8 py-6 text-lg font-semibold transition-all hover:scale-105 hover:cursor-pointer",children:"Get Course Recommendations"}),0===t.size&&s.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-muted-foreground mt-3",children:"Select at least one course you like to get recommendations"})]})]})})}export{N as default};
